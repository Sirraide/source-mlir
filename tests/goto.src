/// R %srcc %s --lowered

/// d b \^bb[0-9]+

proc a extern;
proc b extern;

/// b
/// * hlir.func private @f1 {
/// +   cf.br (?<bb1>$b)
/// + $bb1:
/// +   call @b
/// +   cf.br $bb1
/// + }
proc f1() {
    defer a();
    back: b();
    goto back;
}

/// b
/// * hlir.func private @f2 {
/// +   cf.br (?<bb1>$b)
/// + $bb1:
/// +   call @b
/// +   call @a
/// +   cf.br $bb1
/// + }
proc f2() {
    back: defer a();
    b();
    goto back;
}

/// b
/// * hlir.func private @f3 {
/// +   cf.br (?<bb1>$b)
/// + $bb1:
/// +   call @a
/// +   return
/// + }
proc f3() {
    defer a();
    goto forward;
    b();
    forward:;
}

proc f4() {
    defer a();
    back: b();
    if true then goto back;
}

proc f5() {
    defer a();
    if true then goto forward;
    forward: b();
}

proc f6() {
    defer a();
    if true then goto forward;
    b();
    forward:;
}

proc f7() {
    defer a();
    back: b();
    { { { goto back; } } };
}

proc f8() {
    defer a();
    { { { goto forward; } } };
    forward: b();
}

proc f69() {
    defer a();
    { { { goto forward; } } };
    b();
    forward:;
}