/// RUN: %srcc --sema %s | FileCheck %s

/// CHECK-NOT: Procedure 'trivial' does not return a value on all paths
/// CHECK-NOT: Procedure 'abbr' does not return a value on all paths
proc trivial -> int { return 4; }
proc abbr -> int = 4;

/// CHECK-NOT: Procedure 'if_else' does not return a value on all paths
proc if_else (int a) -> int {
    if a return 4;
    else return 5;
}

/// CHECK-NOT: Procedure 'if_default' does not return a value on all paths
proc if_default (int a) -> int {
    if a return 4;
    return 5;
}

/// CHECK-NOT: Procedure 'if_nested' does not return a value on all paths
proc if_nested (int a) -> int {
    if a {
        return 42;
    } elif {
        if a return 42;
        else return 3;
    } else {
        if a return 3;
        elif {}
        else return 42;
        return 6;
    }
}

/// CHECK: Procedure 'trivial_err' does not return a value on all paths
proc trivial -> int { }

/// CHECK: Procedure 'if_else_err' does not return a value on all paths
proc if_else_err (int a) -> int {
    if a return 4;
    else {};
}

/// CHECK: Procedure 'if_default_err' does not return a value on all paths
proc if_default_err (int a) -> int {
    if a return 4;
}

/// CHECK: Procedure 'if_nested_err1' does not return a value on all paths.
proc if_nested_err1 (int a) -> int {
    if a { }
    elif {
        if a return 42;
        else return 3;
    } else {
        if a return 3;
        elif {}
        else return 42;
        return 6;
    }
}

/// CHECK: Procedure 'if_nested_err2' does not return a value on all paths.
proc if_nested_err2 (int a) -> int {
    if a {
        return 42;
    } elif {
        if a {}
        else return 3;
    } else {
        if a return 3;
        elif {}
        else return 42;
        return 6;
    }
}

/// CHECK: Procedure 'if_nested_err3' does not return a value on all paths.
proc if_nested_err3 (int a) -> int {
    if a {
        return 42;
    } elif {
        if a return 42;
        else {}
    } else {
        if a return 3;
        elif {}
        else return 42;
        return 6;
    }
}

/// CHECK: Procedure 'if_nested_err4' does not return a value on all paths.
proc if_nested_err4 (int a) -> int {
    if a {
        return 42;
    } elif {
        if a return 42;
        else return 3;
    } else {
        if a return 3;
        elif {}
        else return 42;
    }
}

/// CHECK: Procedure 'if_nested_err5' does not return a value on all paths.
proc if_nested_err5 (int a) -> int {
    if a {
        return 42;
    } elif {
        if a return 42;
        else return 3;
    } else {
        if a return 3;
        elif return 6;
    }
}